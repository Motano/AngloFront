/*!

=========================================================
* Light Bootstrap Dashboard React - v2.0.0
=========================================================

* Product Page: https://www.creative-tim.com/product/light-bootstrap-dashboard-react
* Copyright 2020 Creative Tim (https://www.creative-tim.com)

* Coded by Creative Tim

=========================================================

* The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.

*/
(this["webpackJsonplight-bootstrap-dashboard-react"]=this["webpackJsonplight-bootstrap-dashboard-react"]||[]).push([[0],{118:function(e,t,a){"use strict";a.r(t);var s=a(0),c=a.n(s),n=a(21),r=a.n(n),o=a(19),i=a(9),l=(a(85),a(86),a(87),a(88),a(89),a(90),a(6)),d=Object(s.createContext)(),j=function(e,t){switch(t.type){case"SET_LOGIN":return{isLoged:t.payload.isLoged,id_usuario:t.payload.id_usuario,nombre:t.payload.nombre,correo:t.payload.correo};case"SIGN_OFF":return{isLoged:!1,id_usuario:"",nombre:"",correo:""};default:return e}},u=a(1),m=function(e){var t=Object(s.useReducer)(j,{isLoged:!1,id_usuario:"",nombre:"",correo:""}),a=Object(l.a)(t,2),c=a[0],n=a[1];return Object(u.jsx)(d.Provider,{value:{usuario:c,setUsuario:function(e){n({type:"SET_LOGIN",payload:e})},removerUsuario:function(){n({type:"SIGN_OFF"})}},children:e.children})},b=a(2),x=a(3),h=function(e,t){sessionStorage.setItem("token",e),sessionStorage.setItem("usuario",t)},f=function(){sessionStorage.removeItem("token"),sessionStorage.removeItem("usuario")},O=function(){var e=sessionStorage.getItem("token");return e||null},p=function(){var e=sessionStorage.getItem("usuario");return e?JSON.parse(e):null},v=function(){localStorage.removeItem("venta")},g=["component","restricted"],N=function(e){var t=e.component,a=e.restricted,n=Object(x.a)(e,g),r=Object(s.useContext)(d),o=r.usuario,l=r.removerUsuario,j=o.isLoged;return console.log("isLoged",j),c.a.useEffect((function(){O()||l()}),[]),Object(u.jsx)(i.b,Object(b.a)(Object(b.a)({},n),{},{render:function(e){return j&&a?Object(u.jsx)(i.a,{to:"/admin"}):Object(u.jsx)(t,Object(b.a)({},e))}}))},y=["component"],w=function(e){var t=e.component,a=Object(x.a)(e,y),c=Object(s.useContext)(d),n=c.usuario,r=c.setUsuario,o=n.isLoged,l=Object(i.g)();Object(i.h)();return Object(s.useEffect)((function(){var e=O();if(e||l.push("/auth"),e){var t=p(),a=t.nombre,s=t.correo,c=t.id_usuario;r({isLoged:!0,nombre:a,correo:s,id_usuario:c}),l.push("/admin/dashboard")}}),[]),Object(u.jsx)(i.b,Object(b.a)(Object(b.a)({},a),{},{render:function(e){return o?Object(u.jsx)(t,Object(b.a)({},e)):Object(u.jsx)(i.a,{to:"/login"})}}))},C=a(7),k=a(32),S=a.n(k),I=a.p+"static/media/fondo-piano.208d7cf8.jpg",L="http://localhost:5000",E=function(){var e=Object(i.g)(),t=Object(s.useContext)(d),a=(t.usuario,t.setUsuario),c=Object(s.useState)(!1),n=Object(l.a)(c,2),r=n[0],o=n[1],j=Object(s.useState)(!1),m=Object(l.a)(j,2),x=m[0],O=m[1],p=Object(s.useState)({}),g=Object(l.a)(p,2),N=g[0],y=g[1],w=function(e){e.preventDefault(),y(Object(b.a)(Object(b.a)({},N),{},Object(C.a)({},e.target.name,e.target.value)))};return Object(s.useEffect)((function(){f(),v()}),[]),Object(u.jsx)("div",{className:"container-fluid",children:Object(u.jsxs)("div",{className:"row d-flex justify-content-start",children:[Object(u.jsx)("div",{className:"col-12 col-sm-7 col-md-5 col-lg-4 py-5 py-sm-0 vh-100 px-0 mr-4 bg-light",children:Object(u.jsx)("div",{className:"bg-white h-100 shadow",children:Object(u.jsxs)("div",{className:"px-3 h-100 ",children:[Object(u.jsx)("div",{className:"d-flex justify-content-center py-5 ",children:Object(u.jsxs)("div",{children:[Object(u.jsx)("p",{className:"text-sm text-muted text-center",children:"Bienvenido a"}),Object(u.jsxs)("h2",{className:"font-romero-pianos my-4",style:{fontSize:"58px"},children:["Romero ",Object(u.jsx)("span",{className:"text-yellow",children:"Pianos"})]})]})}),Object(u.jsx)("div",{className:"row d-flex justify-content-center",children:Object(u.jsx)("div",{className:"col-10",children:Object(u.jsxs)("form",{action:"",onSubmit:function(t){t.preventDefault();S.a.post("".concat(L,"/auth/login"),N).then((function(t){if(400!=t.status&&e.push("/auth"),200===t.status){var s=t.data.usuario,c=s.id_usuario,n=s.nombre,r=s.correo,o=t.data.token;a({isLoged:!0,id_usuario:c,nombre:n,correo:r}),h(o,JSON.stringify(t.data.usuario)),e.push("/admin/dashboard")}}),(function(e){console.log(e),o(!r),setInterval((function(){o(!1)}),4e3)}))},children:[Object(u.jsxs)("div",{className:"mb-4",children:[Object(u.jsx)("label",{className:"text-sm",children:"Correo"}),Object(u.jsx)("input",{type:"email",name:"correo",className:"form-control text-sm",placeholder:"ejemplo@gmail.com",onChange:w})]}),Object(u.jsxs)("div",{className:"mb-4",children:[Object(u.jsx)("label",{className:"text-sm",children:"Contrase\xf1a"}),Object(u.jsxs)("div",{className:"position-relative",children:[Object(u.jsx)("span",{type:"button",className:"position-absolute end-0 text-secondary mx-3 p-1",onClick:function(){return O(!x)},children:x?Object(u.jsx)("i",{className:"far fa-eye fa-md"}):Object(u.jsx)("i",{className:"far fa-eye-slash fa-md"})}),Object(u.jsx)("input",{type:x?"text":"password",name:"password",className:"form-control text-sm",placeholder:"Contrase\xf1a",onChange:w})]})]}),Object(u.jsx)("div",{className:"d-flex justify-content-center my-3",children:Object(u.jsx)("button",{type:"submit",className:"btn btn-sm btn-yellow w-75",children:"Iniciar sesi\xf3n"})})]})})}),r&&Object(u.jsx)("div",{className:"row mx-4 pt-3",children:Object(u.jsx)("div",{className:"alert alert-danger fade-in py-3",role:"alert",children:"Comprueba tu correo o tu contrase\xf1a !"})}),Object(u.jsx)("div",{className:"h-25",children:Object(u.jsx)("div",{className:"d-flex align-items-center align-items-sm-end",children:Object(u.jsx)("div",{className:"d-flex justify-content-center w-100",children:Object(u.jsxs)("p",{className:"text-xs text-muted",children:["Copyright ",Object(u.jsx)("i",{class:"far fa-copyright fa-sm"})," 2021"," ",Object(u.jsx)("a",{href:"https://www.creative-tim.com/campaign",className:"text-muted",children:"Creative Tim"})," ","y"," ",Object(u.jsx)("a",{href:"https://github.com/LeoQuark",className:"text-muted",children:"LeoQuark"})," "]})})})})]})})}),Object(u.jsx)("div",{className:"col vh-100 p-0 m-0",children:Object(u.jsx)("div",{className:"d-flex justify-content-center",children:Object(u.jsx)("img",{src:I,alt:"",className:" img-fluid",style:{width:"100%",height:"100vh",backgroundSize:"cover",filter:"grayscale(30%)"}})})})]})})},_=a(126),F=a(129),M=a(124),D=a(127),G=a(130),P=a(128),T=a(15),B=a.n(T),J=a(33),R=a(123),A=a(131),V=function(e){var t=e.titulo,a=e.dato,s=e.icon,c=e.iconColor,n=e.subtitulo,r=e.flecha,o=e.flechaColor;return Object(u.jsx)(R.a,{lg:"3",sm:"6",xs:"6",children:Object(u.jsxs)(A.a,{className:"card-stats",children:[Object(u.jsx)(A.a.Body,{children:Object(u.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(u.jsx)("div",{className:"mx-2",children:Object(u.jsx)("div",{className:"icon-big text-center "+c,children:Object(u.jsx)("i",{className:s})})}),Object(u.jsx)("div",{children:Object(u.jsxs)("div",{className:"numbers",children:[Object(u.jsx)("p",{className:"card-category",children:t}),Object(u.jsx)("p",{className:"text-xl",children:a})]})})]})}),Object(u.jsxs)(A.a.Footer,{className:"py-0",children:[Object(u.jsx)("hr",{}),Object(u.jsxs)("div",{className:"d-flex justify-content-start align-items-center text-muted my-2",children:[Object(u.jsx)("i",{className:"up"===r?"fas fa-arrow-up "+o:"down"===r?"fas fa-arrow-down "+o:""}),Object(u.jsx)("div",{className:"mx-2",children:n})]})]})]})})},z=a(57),U=a.n(z),H=function(e){var t=e.datos,a=(new Date).getMonth(),s=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"];return Object(u.jsxs)(A.a,{children:[Object(u.jsxs)(A.a.Header,{children:[Object(u.jsx)(A.a.Title,{as:"h4",children:"Ganancias por mes"}),Object(u.jsx)("p",{className:"card-category text-muted",children:function(e){for(var t=0;t<s.length;t++)if(t===e)return s[t]}(a)})]}),Object(u.jsx)(A.a.Body,{className:"my-2",children:Object(u.jsx)("div",{className:"ct-chart",id:"chartHours",children:Object(u.jsx)(U.a,{data:{labels:function(){var e=[];return t[0].map((function(t){return e.push(t)})),e}(),series:[t[1].map((function(e){return e}))]},type:"Line",options:{low:0,high:2.5,showArea:!1,height:"245px",axisX:{showGrid:!1},lineSmooth:!0,showLine:!0,showPoint:!0,fullWidth:!0,chartPadding:{right:50}},responsiveOptions:[["screen and (max-width: 640px)",{axisX:{labelInterpolationFnc:function(e){return e[0]}}}]]})})}),Object(u.jsx)(A.a.Footer,{children:Object(u.jsxs)("div",{className:"legend",children:[Object(u.jsx)("i",{className:"fas fa-circle text-info mx-1 text-sm"}),"Relaci\xf3n Ingreso / Gasto por mes"]})})]})},Q=function(e){var t=e.datos,a=(new Date).getMonth(),s=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],c=function(){var e=t[0]+t[1]+t[2],a=t[0]/e*100,s=t[1]/e*100,c=t[2]/e*100;return[Math.round(100*a)/100,Math.round(100*s)/100,Math.round(100*c)/100]};return Object(u.jsxs)(A.a,{children:[Object(u.jsxs)(A.a.Header,{children:[Object(u.jsx)(A.a.Title,{as:"h5",children:"% Cantidad de ventas por producto"}),Object(u.jsx)("p",{className:"card-category text-muted",children:function(e){for(var t=0;t<s.length;t++)if(t===e)return s[t]}(a)})]}),Object(u.jsxs)(A.a.Body,{className:"my-4",children:[Object(u.jsx)("div",{className:"ct-chart ct-perfect-fourth",id:"chartPreferences",children:Object(u.jsx)(U.a,{data:{labels:["".concat(c()[0],"%"),"".concat(c()[1],"%"),"".concat(c()[2],"%")],series:[t[0],t[1],t[2]]},type:"Pie"})}),Object(u.jsxs)("div",{className:"legend text-sm",children:[Object(u.jsx)("i",{className:"fas fa-circle text-info"}),"Pianos ",Object(u.jsx)("i",{className:"fas fa-circle text-danger"}),"Muebles ",Object(u.jsx)("i",{className:"fas fa-circle text-warning"}),"Productos en serie"]})]})]})},W=function(){return Object(u.jsx)("div",{className:"container",children:Object(u.jsxs)("div",{className:"row d-flex justify-content-center",children:[Object(u.jsx)("div",{className:"spinner-border text-dark ml-2",role:"status"}),Object(u.jsx)("div",{className:"spinner-border text-warning mx-2",role:"status"}),Object(u.jsx)("div",{className:"spinner-border text-dark mr-2",role:"status"})]})})},X=function(e){return e.slice(1,e.length).replace(".","")},q=function(){var e=Object(J.a)(B.a.mark((function e(t){var a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.get("".concat(L,"/").concat(t,"/getAll"));case 2:if(200==(a=e.sent).status){e.next=5;break}return e.abrupt("return","error");case 5:return e.abrupt("return",a.data.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=a(125),Y=function(){var e=Object(i.h)(),t=Object(s.useState)(),a=Object(l.a)(t,2),c=a[0],n=a[1],r=function(e,t){var a=X(e),s=0!=t?X(t):t;return a>s?"up":a<s?"down":void 0},o=function(e,t){var a=parseInt(e),s=parseInt(t);return a>s?"up":a<s?"down":void 0};return Object(s.useEffect)(Object(J.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q("estadistica");case 2:"error"!=(t=e.sent)&&n(t);case 4:case"end":return e.stop()}}),e)}))),[e]),Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)(M.a,{fluid:!0,children:[c?Object(u.jsxs)(K.a,{children:[Object(u.jsx)(V,{titulo:"Ventas del mes",dato:c.ventas[0],icon:"fas fa-cart-plus fa-sm",iconColor:"text-success",subtitulo:"\xdaltimo mes",flecha:o(c.ventas[0],c.ventas[1]),flechaColor:"up"===o(c.ventas[0],c.ventas[1])?"text-success":"text-danger"}),Object(u.jsx)(V,{titulo:"Ingresos totales",dato:c.ventasValor[0],icon:"fas fa-dollar-sign",iconColor:"text-danger",subtitulo:"\xdaltimo mes",flecha:r(c.ventasValor[0],c.ventasValor[1]),flechaColor:"up"===r(c.ventasValor[0],c.ventasValor[1])?"text-success":"text-danger"}),Object(u.jsx)(V,{titulo:"Gastos totales",dato:c.costos[0],icon:"fas fa-coins fa-sm",iconColor:"text-info",subtitulo:"\xdaltimo mes",flecha:r(c.costos[0],c.costos[1]),flechaColor:"up"===r(c.costos[0],c.costos[1])?"text-success":"text-danger"}),Object(u.jsx)(V,{titulo:"Ganancias del mes",dato:c.proffit[0],icon:"fas fa-chart-line fa-sm",iconColor:"text-success",subtitulo:"\xdaltimo mes",flecha:o(c.costos[0],c.costos[1]),flechaColor:"up"===o(c.proffit[0],c.proffit[1])?"text-success":"text-danger"})]}):Object(u.jsx)(W,{}),c?Object(u.jsxs)(K.a,{children:[Object(u.jsx)(R.a,{md:"8",children:Object(u.jsx)(H,{datos:c.graficoLine})}),Object(u.jsx)(R.a,{md:"4",children:Object(u.jsx)(Q,{datos:c.graficoCirc})})]}):Object(u.jsx)(W,{})]})})},Z=[{path:"/dashboard",name:"Dashboard",icon:"fas fa-chart-pie",component:Y,layout:"/admin"},{path:"/inventario",name:"Inventario",icon:"fas fa-box-open",component:Y,layout:"/admin"},{path:"/registro-ventas",name:"Registro de ventas",icon:"fas fa-shopping-basket",component:Y,layout:"/admin"},{path:"/trabajadores",name:"Trabajadores",icon:"fas fa-users",component:Y,layout:"/admin"},{path:"/importaciones",name:"Importaciones",icon:"fas fa-calculator",component:Y,layout:"/admin"},{path:"/registro-gastos",name:"Registro de gastos",icon:"fas fa-clipboard-list",component:Y,layout:"/admin"}];var $=function(){var e=Object(i.h)(),t=Object(s.useContext)(d),a=t.usuario;return t.signOff,Object(u.jsx)(F.a,{bg:"white",expand:"lg",className:"border-0",children:Object(u.jsxs)(M.a,{fluid:!0,className:"w-100",children:[Object(u.jsxs)("div",{className:"d-flex justify-content-start",children:[Object(u.jsx)(D.a,{variant:"dark",className:"d-lg-none d-flex justify-content-center align-items-center rounded-circle p-2",onClick:function(e){e.preventDefault(),document.documentElement.classList.toggle("nav-open");var t=document.createElement("div");t.id="bodyClick",t.onclick=function(){this.parentElement.removeChild(this),document.documentElement.classList.toggle("nav-open")},document.body.appendChild(t)},children:Object(u.jsx)("i",{className:"fas fa-ellipsis-v"})}),Object(u.jsx)(F.a.Brand,{href:"#home",onClick:function(e){return e.preventDefault()},className:"mr-2",children:function(){for(var t=0;t<Z.length;t++)if(-1!==e.pathname.indexOf(Z[t].layout+Z[t].path))return Z[t].name;return"Brand"}()})]}),Object(u.jsx)(F.a,{className:"border-0",children:Object(u.jsxs)(G.a,{className:"d-flex justify-content-end align-item-center my-auto",children:[Object(u.jsx)(G.a.Link,{className:"text-capitalize mx-0 mx-lg-4",children:"".concat(a.nombre)}),Object(u.jsx)(G.a.Link,{children:Object(u.jsx)(P.a,{placement:"left",delay:{show:150,hide:150},overlay:function(e){return Object(u.jsx)(_.a,Object(b.a)(Object(b.a)({id:"button-tooltip"},e),{},{children:"Cerrar sesi\xf3n"}))},children:Object(u.jsx)(o.b,{to:"/auth",className:"text-secondary my-0 py-2",children:Object(u.jsx)("i",{className:"fas fa-sign-out-alt fa-lg "})})})})]})})]})})},ee=a(28),te=a(42),ae=a(47),se=a(44);s.Component,a.p;var ce=function(e){var t=e.routes,a=Object(i.h)();return Object(u.jsx)("div",{className:"sidebar","data-color":"black",children:Object(u.jsxs)("div",{className:"sidebar-wrapper",children:[Object(u.jsx)("div",{className:"d-flex align-items-center justify-content-center",children:Object(u.jsx)(o.b,{className:"text-white",to:"/admin/dashboard",children:Object(u.jsxs)("h4",{className:"simple-text",children:["Romero ",Object(u.jsx)("span",{style:{color:"#b38c4b"},children:"Pianos"})]})})}),Object(u.jsx)(G.a,{children:t.map((function(e,t){return e.redirect?null:Object(u.jsx)("li",{className:e.upgrade?"active active-pro":(s=e.layout+e.path,a.pathname.indexOf(s)>-1?"active":""),children:Object(u.jsxs)(o.c,{to:e.layout+e.path,className:"nav-link",activeClassName:"active",children:[Object(u.jsx)("i",{className:e.icon}),Object(u.jsx)("p",{children:e.name})]})},t);var s}))})]})})};var ne=function(){Object(s.useContext)(d).usuario;var e,t=O(),a=Object(i.g)(),n=Object(i.h)(),r=c.a.useRef(null);return Object(s.useEffect)((function(){t||a.push("/auth")}),[]),Object(s.useEffect)((function(){if(document.documentElement.scrollTop=0,document.scrollingElement.scrollTop=0,r.current.scrollTop=0,window.innerWidth<993&&-1!==document.documentElement.className.indexOf("nav-open")){document.documentElement.classList.toggle("nav-open");var e=document.getElementById("bodyClick");e.parentNode.removeChild(e)}}),[n]),Object(u.jsxs)("div",{className:"wrapper",children:[Object(u.jsx)(ce,{routes:Z}),Object(u.jsxs)("div",{className:"main-panel",ref:r,children:[Object(u.jsx)($,{}),Object(u.jsx)("div",{className:"content-fluid",children:Object(u.jsx)(i.d,{children:(e=Z,e.map((function(e,t){return"/admin"===e.layout?Object(u.jsx)(i.b,{path:e.layout+e.path,render:function(t){return Object(u.jsx)(e.component,Object(b.a)({},t))}},t):null})))})})]})]})};r.a.render(Object(u.jsx)(m,{children:Object(u.jsx)(o.a,{children:Object(u.jsxs)(i.d,{children:[Object(u.jsx)(N,{component:E,path:"/auth",exact:!0}),Object(u.jsx)(w,{component:ne,path:"/admin"}),Object(u.jsx)(i.a,{from:"/",to:"/auth"})]})})}),document.getElementById("root"))},86:function(e,t,a){},87:function(e,t,a){},88:function(e,t,a){},89:function(e,t,a){}},[[118,1,2]]]);
//# sourceMappingURL=main.be628cc8.chunk.js.map